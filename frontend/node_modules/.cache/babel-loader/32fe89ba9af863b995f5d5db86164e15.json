{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Lokesh\\\\CHARITY-DONATION\\\\frontend\\\\src\\\\components\\\\PaymentForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport axios from \"axios\";\nimport { load } from '@cashfreepayments/cashfree-js';\n\nfunction App() {\n  _s();\n\n  let cashfree;\n\n  let insitialzeSDK = async function () {\n    cashfree = await load({\n      mode: \"sandbox\"\n    });\n  };\n\n  insitialzeSDK();\n  const [orderId, setOrderId] = useState(\"\");\n\n  const getSessionId = async () => {\n    try {\n      let res = await axios.get(\"http://localhost:4000/payment\");\n\n      if (res.data && res.data.payment_session_id) {\n        console.log(res.data);\n        setOrderId(res.data.order_id);\n        return res.data.payment_session_id;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const verifyPayment = async () => {\n    try {\n      let res = await axios.post(\"http://localhost:4000/verify\", {\n        orderId: orderId\n      });\n\n      if (res && res.data) {\n        alert(\"payment verified\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n\n    try {\n      let sessionId = await getSessionId();\n      let checkoutOptions = {\n        paymentSessionId: sessionId,\n        redirectTarget: \"_modal\"\n      };\n      cashfree.checkout(checkoutOptions).then(res => {\n        console.log(\"payment initialized\");\n        verifyPayment(orderId);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClick,\n        children: \"Pay now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(App, \"ikHUQmPDYGO1gxyetLqSSeFoQ7M=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Lokesh/CHARITY-DONATION/frontend/src/components/PaymentForm.js"],"names":["useState","axios","load","App","cashfree","insitialzeSDK","mode","orderId","setOrderId","getSessionId","res","get","data","payment_session_id","console","log","order_id","error","verifyPayment","post","alert","handleClick","e","preventDefault","sessionId","checkoutOptions","paymentSessionId","redirectTarget","checkout","then"],"mappings":";;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,IAAR,QAAmB,+BAAnB;;AAGA,SAASC,GAAT,GAAe;AAAA;;AAEb,MAAIC,QAAJ;;AAEA,MAAIC,aAAa,GAAG,kBAAkB;AAEpCD,IAAAA,QAAQ,GAAG,MAAMF,IAAI,CAAC;AACpBI,MAAAA,IAAI,EAAE;AADc,KAAD,CAArB;AAGD,GALD;;AAOAD,EAAAA,aAAa;AAEb,QAAM,CAACE,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,EAAD,CAAtC;;AAIA,QAAMS,YAAY,GAAG,YAAY;AAC/B,QAAI;AACF,UAAIC,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAN,CAAU,+BAAV,CAAhB;;AAEA,UAAGD,GAAG,CAACE,IAAJ,IAAYF,GAAG,CAACE,IAAJ,CAASC,kBAAxB,EAA2C;AAEzCC,QAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACE,IAAhB;AACAJ,QAAAA,UAAU,CAACE,GAAG,CAACE,IAAJ,CAASI,QAAV,CAAV;AACA,eAAON,GAAG,CAACE,IAAJ,CAASC,kBAAhB;AACD;AAGF,KAXD,CAWE,OAAOI,KAAP,EAAc;AACdH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD;AACF,GAfD;;AAiBA,QAAMC,aAAa,GAAG,YAAY;AAChC,QAAI;AAEF,UAAIR,GAAG,GAAG,MAAMT,KAAK,CAACkB,IAAN,CAAW,8BAAX,EAA2C;AACzDZ,QAAAA,OAAO,EAAEA;AADgD,OAA3C,CAAhB;;AAIA,UAAGG,GAAG,IAAIA,GAAG,CAACE,IAAd,EAAmB;AACjBQ,QAAAA,KAAK,CAAC,kBAAD,CAAL;AACD;AAEF,KAVD,CAUE,OAAOH,KAAP,EAAc;AACdH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD;AACF,GAdD;;AAgBA,QAAMI,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC/BA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAI;AAEF,UAAIC,SAAS,GAAG,MAAMf,YAAY,EAAlC;AACA,UAAIgB,eAAe,GAAG;AACpBC,QAAAA,gBAAgB,EAAGF,SADC;AAEpBG,QAAAA,cAAc,EAAC;AAFK,OAAtB;AAKAvB,MAAAA,QAAQ,CAACwB,QAAT,CAAkBH,eAAlB,EAAmCI,IAAnC,CAAyCnB,GAAD,IAAS;AAC/CI,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AAEAG,QAAAA,aAAa,CAACX,OAAD,CAAb;AACD,OAJD;AAOD,KAfD,CAeE,OAAOU,KAAP,EAAc;AACdH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD;AAEF,GArBD;;AAsBA,sBACE;AAAA,2BAEE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,6BACE;AAAQ,QAAA,OAAO,EAAEI,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFF,mBADF;AAYD;;GApFQlB,G;;KAAAA,G;AAsFT,eAAeA,GAAf","sourcesContent":["import { useState } from 'react'\r\nimport axios from \"axios\"\r\nimport {load} from '@cashfreepayments/cashfree-js'\r\n\r\n\r\nfunction App() {\r\n\r\n  let cashfree;\r\n\r\n  let insitialzeSDK = async function () {\r\n\r\n    cashfree = await load({\r\n      mode: \"sandbox\",\r\n    })\r\n  }\r\n\r\n  insitialzeSDK()\r\n\r\n  const [orderId, setOrderId] = useState(\"\")\r\n\r\n\r\n\r\n  const getSessionId = async () => {\r\n    try {\r\n      let res = await axios.get(\"http://localhost:4000/payment\")\r\n      \r\n      if(res.data && res.data.payment_session_id){\r\n\r\n        console.log(res.data)\r\n        setOrderId(res.data.order_id)\r\n        return res.data.payment_session_id\r\n      }\r\n\r\n\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  const verifyPayment = async () => {\r\n    try {\r\n      \r\n      let res = await axios.post(\"http://localhost:4000/verify\", {\r\n        orderId: orderId\r\n      })\r\n\r\n      if(res && res.data){\r\n        alert(\"payment verified\")\r\n      }\r\n\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n\r\n      let sessionId = await getSessionId()\r\n      let checkoutOptions = {\r\n        paymentSessionId : sessionId,\r\n        redirectTarget:\"_modal\",\r\n      }\r\n\r\n      cashfree.checkout(checkoutOptions).then((res) => {\r\n        console.log(\"payment initialized\")\r\n\r\n        verifyPayment(orderId)\r\n      })\r\n\r\n\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n\r\n  }\r\n  return (\r\n    <>\r\n    \r\n      <div className=\"card\">\r\n        <button onClick={handleClick}>\r\n          Pay now\r\n        </button>\r\n\r\n      </div>\r\n\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}