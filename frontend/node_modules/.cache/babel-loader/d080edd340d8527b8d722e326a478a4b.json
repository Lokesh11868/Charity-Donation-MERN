{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Lokesh\\\\CROWDFUNDING-WEBSITE\\\\crowdfunding\\\\src\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Login() {\n  _s();\n\n  const [credential, setCredential] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [user, setUser] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const history = useHistory(); // Handle input changes\n\n  function handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setCredential(prevCredential => ({ ...prevCredential,\n      [name]: value\n    }));\n  } // Submit credentials to the server\n\n\n  async function submitCredential(event) {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post(\"http://localhost:4000/login\", credential);\n\n      if (response.data.result) {\n        // Login success\n        const loggedInUser = response.data;\n        setUser(loggedInUser);\n        localStorage.setItem(\"user\", JSON.stringify(loggedInUser));\n        history.push({\n          pathname: \"/admin\",\n          state: {\n            loggedInStatus: true\n          }\n        });\n      } else {\n        // Login failure\n        setErrorMessage(response.data.message || \"Invalid email or password. Please try again.\");\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      setErrorMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"An error occurred during login.\");\n    }\n  } // Check for previously logged-in user\n\n\n  useEffect(() => {\n    const loggedInUser = localStorage.getItem(\"user\");\n\n    if (loggedInUser) {\n      const parsedUser = JSON.parse(loggedInUser);\n      setUser(parsedUser);\n      history.push(\"/admin\"); // Automatically redirect if logged in\n    }\n  }, [history]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitCredential,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          onChange: handleChange,\n          value: credential.email,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          onChange: handleChange,\n          value: credential.password,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"oeUhEofsHVXTMhFdCHteWpFxghQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Lokesh/CROWDFUNDING-WEBSITE/crowdfunding/src/components/Login.js"],"names":["React","useState","useEffect","axios","useHistory","Login","credential","setCredential","email","password","user","setUser","errorMessage","setErrorMessage","history","handleChange","event","name","value","target","prevCredential","submitCredential","preventDefault","response","post","data","result","loggedInUser","localStorage","setItem","JSON","stringify","push","pathname","state","loggedInStatus","message","error","getItem","parsedUser","parse","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Login() {\r\n  const [credential, setCredential] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [user, setUser] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  // Handle input changes\r\n  function handleChange(event) {\r\n    const { name, value } = event.target;\r\n    setCredential((prevCredential) => ({\r\n      ...prevCredential,\r\n      [name]: value,\r\n    }));\r\n  }\r\n\r\n  // Submit credentials to the server\r\n  async function submitCredential(event) {\r\n    event.preventDefault();\r\n    try {\r\n      const response = await axios.post(\"http://localhost:4000/login\", credential);\r\n      if (response.data.result) {\r\n        // Login success\r\n        const loggedInUser = response.data;\r\n        setUser(loggedInUser);\r\n        localStorage.setItem(\"user\", JSON.stringify(loggedInUser));\r\n        history.push({\r\n          pathname: \"/admin\",\r\n          state: { loggedInStatus: true },\r\n        });\r\n      } else {\r\n        // Login failure\r\n        setErrorMessage(response.data.message || \"Invalid email or password. Please try again.\");\r\n      }\r\n    } catch (error) {\r\n      setErrorMessage(\r\n        error.response?.data?.message || \"An error occurred during login.\"\r\n      );\r\n    }\r\n  }\r\n\r\n  // Check for previously logged-in user\r\n  useEffect(() => {\r\n    const loggedInUser = localStorage.getItem(\"user\");\r\n    if (loggedInUser) {\r\n      const parsedUser = JSON.parse(loggedInUser);\r\n      setUser(parsedUser);\r\n      history.push(\"/admin\"); // Automatically redirect if logged in\r\n    }\r\n  }, [history]);\r\n\r\n  return (\r\n    <div className=\"Login-page\">\r\n      <h1>Login</h1>\r\n      <form onSubmit={submitCredential}>\r\n        <div>\r\n          <label>Email:</label>\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            onChange={handleChange}\r\n            value={credential.email}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Password:</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            onChange={handleChange}\r\n            value={credential.password}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n      {errorMessage && <p style={{ color: \"red\" }}>{errorMessage}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}