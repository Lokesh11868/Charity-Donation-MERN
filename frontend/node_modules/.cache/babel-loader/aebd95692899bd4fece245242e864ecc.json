{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Lokesh\\\\CROWDFUNDING-WEBSITE\\\\crowdfunding\\\\src\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction Login(props) {\n  _s();\n\n  const [data, setData] = useState({});\n  const [credential, setCredential] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const history = useHistory();\n  const [user, setUser] = useState();\n  useEffect(() => {\n    if (data.result === true) {\n      //set the state of the user\n      setUser(data); //stoe the user in localStorage\n\n      localStorage.setItem('user', data);\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/admin\",\n          state: {\n            loggedInStatus: data.result\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 15\n      }, this); //     // return   <Redirect  to= \"/admin\"/>\n      //     //   {/* <Redirect  to={{ pathname: \"/admin\", state: { loggedInStatus: data.result } }}/> */}\n    }\n\n    if (data.result === false) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }, this);\n    }\n  }, [data]);\n\n  function handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setCredential(prevCredential => {\n      return { ...prevCredential,\n        [name]: value\n      };\n    });\n  }\n\n  function submitCredential(event) {\n    event.preventDefault();\n    const response = axios.post(\"http://localhost:4000/login\", credential).then(res => {\n      setData(res.data);\n      console.log(\"local storage:\", res.data);\n    }).catch(error => console.log(error));\n    console.log(\"the credential\");\n    console.log(credential);\n    setCredential({\n      email: \"\",\n      password: \"\"\n    });\n  }\n\n  useEffect(() => {\n    console.log(\"data insie useeffect\", data);\n\n    if (data.result === true) {\n      console.log(\" if true data insie useeffect\", data.result); //set the state of the user\n      // setUser(data)\n      //stoe the user in localStorage\n\n      localStorage.setItem('user', JSON.stringify(data)); // <Redirect to={{ pathname: \"/admin\", state: { loggedInStatus: data.result } }}/> \n      // return   <Redirect  to= \"/admin\"/>\n      //   {/* <Redirect  to={{ pathname: \"/admin\", state: { loggedInStatus: data.result } }}/> */}\n\n      history.push({\n        pathname: '/admin',\n        state: {\n          // location state\n          loggedInStatus: data.result\n        }\n      });\n    }\n\n    if (data.result === false) {\n      alert(\"Mr.Culprit,you need to take a break!\"); // <Redirect to=\"/login\" />;\n    }\n  }, [data]); //check if user has previously logged in\n\n  useEffect(() => {\n    const loggedInUser = localStorage.getItem('user');\n\n    if (loggedInUser) {\n      const foundUser = JSON.parse(loggedInUser);\n      setUser(foundUser);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login-page\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [\"Email\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        onChange: handleChange,\n        value: credential.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), \"Password\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        onChange: handleChange,\n        value: credential.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: submitCredential,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"JtCHCjbrlv7VlZ/Iq/TzOYF4RvU=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Lokesh/CROWDFUNDING-WEBSITE/crowdfunding/src/components/Login.js"],"names":["React","useState","useEffect","Route","Redirect","axios","useHistory","Login","props","data","setData","credential","setCredential","email","password","history","user","setUser","result","localStorage","setItem","pathname","state","loggedInStatus","handleChange","event","name","value","target","prevCredential","submitCredential","preventDefault","response","post","then","res","console","log","catch","error","JSON","stringify","push","alert","loggedInUser","getItem","foundUser","parse"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nfunction Login(props) {\r\n  const [data, setData] = useState({});\r\n\r\n\r\n\r\n  const [credential, setCredential] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n\r\n  const history = useHistory();\r\n\r\n   const [user, setUser] = useState()\r\n  useEffect(() => {\r\n     if (data.result === true) \r\n     {\r\n       //set the state of the user\r\n     setUser(data)\r\n     //stoe the user in localStorage\r\n     localStorage.setItem('user',data)\r\n       return <Redirect to={{ pathname: \"/admin\", state: { loggedInStatus: data.result } }}/> \r\n  //     // return   <Redirect  to= \"/admin\"/>\r\n  //     //   {/* <Redirect  to={{ pathname: \"/admin\", state: { loggedInStatus: data.result } }}/> */}\r\n      \r\n     }\r\n    \r\n     if (data.result === false) {\r\n     return <Redirect to=\"/login\" />;\r\n    }\r\n\r\n }, [data]);\r\n\r\n\r\n  function handleChange(event) {\r\n    const { name, value } = event.target;\r\n\r\n    setCredential((prevCredential) => {\r\n      return {\r\n        ...prevCredential,\r\n        [name]: value,\r\n      };\r\n    });\r\n  }\r\n\r\n  function submitCredential(event) {\r\n    event.preventDefault();\r\n\r\n  const response=axios\r\n      .post(\"http://localhost:4000/login\", credential)\r\n      .then((res) => {\r\n        setData(res.data);\r\n        \r\n        console.log(\"local storage:\",res.data)\r\n      })\r\n      .catch((error) => console.log(error));\r\n\r\n    console.log(\"the credential\");\r\n    console.log(credential);\r\n\r\n    setCredential({\r\n      email: \"\",\r\n      password: \"\",\r\n    });\r\n  }\r\n\r\n \r\n\r\n  useEffect(() => {\r\n\r\n    console.log(\"data insie useeffect\",data);\r\n    \r\n    if (data.result === true) \r\n    {\r\n      console.log(\" if true data insie useeffect\",data.result);\r\n      \r\n      //set the state of the user\r\n    // setUser(data)\r\n    //stoe the user in localStorage\r\n    localStorage.setItem('user',JSON.stringify(data))\r\n      // <Redirect to={{ pathname: \"/admin\", state: { loggedInStatus: data.result } }}/> \r\n      // return   <Redirect  to= \"/admin\"/>\r\n      //   {/* <Redirect  to={{ pathname: \"/admin\", state: { loggedInStatus: data.result } }}/> */}\r\n\r\n\r\n\r\n      history.push({\r\n        pathname: '/admin',\r\n        state: {  // location state\r\n          loggedInStatus: data.result\r\n        },\r\n      }); \r\n      \r\n    }\r\n    \r\n    if (data.result === false) {\r\n      alert(\"Mr.Culprit,you need to take a break!\");\r\n      // <Redirect to=\"/login\" />;\r\n\r\n    }\r\n\r\n  }, [data]);\r\n\r\n\r\n  //check if user has previously logged in\r\n  useEffect(() => {\r\n   const loggedInUser = localStorage.getItem('user');\r\n    if (loggedInUser) {\r\n      const foundUser = JSON.parse(loggedInUser);\r\n      setUser(foundUser);\r\n    }\r\n  }, []);\r\n  return (\r\n    <div className=\"Login-page\">\r\n      {/* <h1>LOGIN</h1> */}\r\n      <form>\r\n        Email\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          onChange={handleChange}\r\n          value={credential.email}\r\n        />\r\n        Password\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n          value={credential.password}\r\n        />\r\n        <button type=\"submit\" onClick={submitCredential}>\r\n          Login\r\n        </button>\r\n      </form>\r\n\r\n    </div>\r\n  );\r\n} \r\n\r\n\r\nexport default Login;\r\n\r\n"]},"metadata":{},"sourceType":"module"}